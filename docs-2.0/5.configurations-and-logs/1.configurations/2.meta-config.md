# Meta服务配置

Meta服务的配置保存在`nebula-metad.conf.default`和`nebula-metad.conf.production`文件中，默认路径为`/usr/local/nebula/etc/`。

- `nebula-metad.conf.default`文件是Meta服务的**默认配置文件**，建议在测试环境中使用，方便调试。

- `nebula-metad.conf.production`文件是Meta服务的**生产环境配置文件**，建议在生产环境中使用。

>**说明**：
>
>- 使用配置文件前，需要把后缀`.default`或`.production`删除，系统才能识别为配置文件。
>- 如果修改配置文件内容，您需要在配置文件开头添加`--local_config=true`并重启服务。

## basics配置

| 名称         | 默认值                   | 说明              |
| ----------- | ----------------------- | ------------------|
| `daemonize` | `true`                    | 是否启动守护进程。 |
| `pid_file`  | `pids/nebula-metad.pid` | 记录进程ID的文件。   |

## logging配置

| 名称           | 默认值                    | 说明                |
| ------------- | ------------------------ | ------------------------------------------------ |
| `log_dir`     | `logs` | 存放Meta服务日志的目录，建议和数据保存在不同硬盘。          |
| `minloglevel` | `0`                      | 最小日志级别，即不会记录低于这个级别的日志。取值为`0`（INFO）、`1`（WARNING）、`2`（ERROR）、`3`（FATAL）。建议您在调试时设置为`0`，生产环境中设置为`1`。如果设置为`4`，Nebula Graph不会记录任何日志。 |
| `v`           | `0`                      | 日志详细级别，与`minloglevel`相反，取值越小，级别越高，日志记录越详细。取值为`0`（最详细）、`1`、`2`、`3`。            |
| `logbufsecs`  | `0`                      | 缓冲日志的最大时间，超时后输出到日志文件。`0`表示实时输出。单位：秒。       |
|`redirect_stdout`|`true`                  |是否将标准输出和标准错误重定向到单独的输出文件。           |
|`stdout_log_file` |`metad-stdout.log`     | 标准输出日志文件名称。                           |
`stderr_log_file`  |`metad-stderr.log`     | 标准错误日志文件名称。                           |
`stderrthreshold`  | `2`                   | 要复制到标准错误中的最小日志级别（`minloglevel`）。 |

## networking配置

| 名称                      | 默认值           | 说明          |
| ----------------------- | ---------------- | ---------------------------------------------------- |
| `meta_server_addrs`     | `127.0.0.1:9559` | Meta服务的IP地址和端口。多个Meta服务用英文逗号（,）分隔。 |
|`local_ip`               | `127.0.0.1`      | Meta服务的本地IP地址。本地IP地址用于识别metad进程，如果是分布式集群或需要远程访问，请修改为对应地址。|
| `port`                  | `9559`           | Meta服务的RPC守护进程监听端口。Meta服务对外端口为`9559`，对内端口为`对外端口+1`，即`9560`，Nebula Graph使用内部端口进行多副本间的交互。 |
| `ws_ip`                   | `0.0.0.0`      | HTTP服务的IP地址。                                   |
| `ws_http_port`            | `19559`        | HTTP服务的端口。                                     |
| `ws_h2_port`              | `19560`        | HTTP2服务的端口。                                    |

> **NOTE**: 建议您在配置文件中使用真实的IP地址，因为某些情况下`127.0.0.1`无法正确解析。

## storage配置

| 名称                 | 默认值                    | 说明                               |
| ------------------- | ------------------------ | ------------------------------------------ |
|`data_path`|`data/meta`|meta数据存储路径。|

## misc配置

| 名称                       | 默认值    | 说明                     |
| ------------------------- | -------- | ------------------------ |
|`default_parts_num`        | `100`    | 创建图空间时的默认分片数量。  |
|`default_replica_factor`   | `1`      | 创建图空间时的默认副本数量。  |
|`heartbeat_interval_secs`  | `10`     | 默认心跳间隔。单位：秒。     |

> **警告**：请确保所有服务的`heartbeat_interval_secs`取值相同，否则会导致系统无法正常工作。